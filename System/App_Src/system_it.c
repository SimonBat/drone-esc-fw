/**
  ***************************************************************************************************************************************
  * @file     system_it.c
  * @owner    SimonBat
  * @version  V0.0.1
  * @date     2024.01.31
  * @update   2024.01.31
  * @brief    drone_esc_fw
  ***************************************************************************************************************************************
  * @attention
  *
  * (Where to use)
  *
  ***************************************************************************************************************************************
  */

#include "system_it.h"
#include "system.h"
#include "pwm_if.h"
#include "mc.h"

/**
  ***************************************************************************************************************************************
  * @brief  This function handles Non maskable interrupt
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void NMI_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}
/**
  ***************************************************************************************************************************************
  * @brief  This function handles Memory management fault
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void MemManage_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}

/**
  ***************************************************************************************************************************************
  * @brief  This function handles Prefetch fault, memory access fault
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void BusFault_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}

/**
  ***************************************************************************************************************************************
  * @brief  This function handles Undefined instruction or illegal state
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void UsageFault_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}

/**
  ***************************************************************************************************************************************
  * @brief  This function handles Debug monitor
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void DebugMon_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}

/**
  ***************************************************************************************************************************************
  * @brief  This function handles Hard Fault exception
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void HardFault_Handler(void)
{
	while(1){BSP_Fault_LED_Enable(); NVIC_SystemReset();};
}

/**
  ***************************************************************************************************************************************
  * @brief  This function handles System tick timer
  * @param  None
  * @retval None
  ***************************************************************************************************************************************
  */
void __attribute__((section(".RamFunc"))) SysTick_Handler(void)
{
	MC_Tick_IRQ_Handler();
	SYSTEM_Update_TMO();
}
